env:
  host: ''
  pool: ''
  sign: false
jobs:
  ${{ env. parameters.host  }}:
    runs-on: ${{ env. parameters.pool  }}
    steps:
    - uses: actions/checkout@v2
    - name: Running esy install and esy build
      run: esy install
    - run: |
        PKG=~/foo/esy-ocaml
        APP=~/foo/test-app
        mkdir -p $PKG
        mkdir -p $APP
        cp -R ./ $PKG/
        cp -R test-app/* $APP/
        - bash: |
            cd ~/foo/test-app/
            esy i
            esy x hello
        - bash: |
            cd ~/foo/test-app/
            C:/npm/prefix/node_modules/esy/_build/default/bin/esy.exe i
            C:/npm/prefix/node_modules/esy/_build/default/bin/esy.exe x hello
      shell: bash
                    
